<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="register.component.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300&family=Shadows+Into+Light&display=swap"
      rel="stylesheet"/>
   
    <title>Register</title>
  </head>
  <body>
    <main class="fondo">
      <div class="padre">
        <div class="title">
          <img src="../../../assets/logo_verde.png" alt="img" />
          <h1>Nomads</h1>
        </div>

        <div class="formulario">
          <form [formGroup]="myForm">
            <input type="text" placeholder=" Nombre de usuario" formControlName="username" class="form-control" 
              [ngClass]="{'is-invalid': myForm.get('username').invalid && (myForm.get('username').dirty || myForm.get('username').touched) }">
            <div  *ngIf="myForm.get('username').invalid && (myForm.get('username').dirty || myForm.get('username').touched)" class="invalid-feedback">
              <p class ="validacion">El nombre de usuario debe comenzar con '@'</p> 
            </div>
          
            <input type="email" placeholder=" Correo electrónico" formControlName="email" class="form-control" 
              [ngClass]="{'is-invalid': (myForm.get('email').dirty || myForm.get('email').touched) && !myForm.get('email').valid}" />
            <div *ngIf="!myForm.get('email').valid" class="invalid-feedback">
              <div class ="validacion" *ngIf="myForm.get('email').errors.required">La direccion de email es obligatoria</div>
              <div  *ngIf="myForm.get('email').errors.email">
               <p class ="validacion">Direccion de email incorrecta</p> 
              </div>
            </div>
          
            <input type="text" placeholder=" Nombre" formControlName="name" class="form-control" 
              [ngClass]="{'is-invalid': (myForm.get('name').dirty || myForm.get('name').touched) && !myForm.get('name').valid}" />
            <div  *ngIf="!myForm.get('name').valid" class="invalid-feedback" >
              <p class ="validacion">El nombre es necesario</p> 
            </div> 
          
            <input type="text" placeholder=" Apellidos" formControlName="surname" class="form-control" 
              [ngClass]="{'is-invalid': (myForm.get('surname').dirty || myForm.get('surname').touched) && !myForm.get('surname').valid}"/>
            <div  *ngIf="!myForm.get('surname').valid" class="invalid-feedback" >
              <p class ="validacion">El apellido es necesario</p> 
            </div>
          
            <input type="text" placeholder=" Foto" formControlName ="foto" class="form-control"
              [ngClass]="{'is-invalid': myForm.get('foto').invalid && (myForm.get('foto').dirty || myForm.get('foto').touched)}"/>
            <div  *ngIf="myForm.get('foto').invalid && (myForm.get('foto').dirty || myForm.get('foto').touched)" class="invalid-feedback">
              <p class ="validacion">La foto es requerida</p> 
            </div>
          
            <input type="text" placeholder=" Contraseña" formControlName="password" class="form-control" 
              [ngClass]="{'is-invalid': (myForm.get('password').dirty || myForm.get('password').touched) && !myForm.get('password').valid}"/>
            <div *ngIf="!myForm.get('password').valid" class="invalid-feedback">
              <div class ="validacion" *ngIf="myForm.get('password').errors.required">La clave es obligatoria</div>
              <div class ="validacion" *ngIf="myForm.get('password').errors.minlength">Debe contener al menos 8 caracteres</div> 
            </div>
          

            <input type="text" placeholder=" Repetir contraseña" formControlName="password2" class="form-control" 
            [ngClass]="{'is-invalid': (myForm.get('password2').dirty || myForm.get('password2').touched) && !myForm.get('password2').valid}" />
            <div *ngIf="!myForm.get('password2').valid" class="invalid-feedback">
              <div class ="validacion" *ngIf="myForm.get('password2').errors.required">La clave es obligatoria</div>
              <div class ="validacion" *ngIf="!myForm.get('password2').errors.required && myForm.get('password2').errors.matchPassword">las claves no coinciden</div>
            </div>

            
          </form>
          
          

        </div>
        <div class="boton">

              <button type="submit" (click)="register()" [disabled]="!isFormValid"
              >Regístrate</button>
           
            </div>
      </div>
    </main>

    <script src="register.component.ts"></script>
  </body>
</html>
